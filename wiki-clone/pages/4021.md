# 4021

From [NESdev Wiki](Nesdev_Wiki.xhtml) | View [current version](https://www.nesdev.org/wiki/4021) | View [other pages](Special_AllPages.xhtml#4021)

The **4021** is an 8-bit shift register, used in the [standard NES and Famicom controllers](Standard_controller.xhtml "Standard controller") to latch and output button inputs serially. The **74165** is a similar 8-bit shift register which can be a suitable substitute. 

The 4021 stores 8 bits of state in its register when latched, and outputs them one at a time serially when clocked. 

## 4021 Pinout
    
    
           .--\/--.
    PI-8 ->|01  16|-- Vcc
      Q6 <-|02  15|<- PI-7
      Q8 <-|03  14|<- PI-6
    PI-4 ->|04  13|<- PI-5
    PI-3 ->|05  12|-> Q7
    PI-2 ->|06  11|<- Serial In
    PI-1 ->|07  10|<- Clock
     Vss --|08  09|<- Parallel/Serial Control
           '------'
    

  * **Vcc** \- Circuit voltage, usually +5V supply.
  * **Vss** \- Negative voltage, usually ground.
  * **Parallel/Serial Control** \- When high, the **PI** inputs are latched into the bits of its register. When low, the _Clock_ input can be activated.
  * **Clock** \- When the _Parallel/Serial Control_ is low, and _Clock_ transitions from low to high, each register bit is shifted into to the next higher bit. The value in _Q1_ is replaced by _Serial In_ , and the value of _Q8_ is discarded.
  * **PI-n** \- Parallel input, replaces bit _Qn_ while _Parallel/Serial Control_ is high.
  * **Qn** \- Register state output, the current state of bit 'n'. _Q1-Q5_ are internal and cannot be read directly.
  * **Serial In** \- Replaces _Q1_ when shifted by a _Clock_.



The standard controller connects signals from the [controller port](Controller_port_pinout.xhtml "Controller port pinout") directly to the 4021: 

  * **+5V** -> **Vcc**
  * **GND** -> **Vss** , **Serial In**
  * **OUT** -> **Parallel/Serial Control** \- The last write to $4016:0 controls the latch.
  * **CLK** -> **Clock** \- This is normally high. It goes low when _Q8_ is read, then returns high to shift the register when the read is finished.
  * **D0** <\- **Q8** \- Reading the serial output.



By connecting _Q8_ of one 4021 to the _Serial In_ of another, multiple chips can be chained together into a longer register of 16 bits or more. 

## 74165 Pinout

The 74165 is very similar to the 4021, and aside from pin reordering, is almost compatible except for the inverted latch control: 

  * _/PL_ is inverted compared to the 4021's 'Parallel/Serial Control'.
  * The 74165 numbers its bits 0-7 instead of 1-8.
  * Only the last bit is output, instead of the last three, though it also has a second inverted output.


    
    
           .--\/--.
     /PL ->|01  16|-- Vcc
      CP ->|02  15|<- /CE
      D4 <-|03  14|<- D3
      D5 <-|04  13|<- D2
      D6 <-|05  12|<- D1
      D7 <-|06  11|<- D0
     /Q7 <-|07  10|<- Ds
     GND --|08  09|-> Q7
           '------'
    

  * **Vcc** \- Circuit voltage, usually +5V supply.
  * **GND** \- Ground.
  * **/PL** \- When low, the _Dn_ inputs are latched into the register. When high the _CP_ input takes effect. This is inverted, compared to the 4021's _Parallel/Serial Control'_. One or both of _CP_ and _/CE_ should be high when _/PL_ goes from low to high.
  * **CP** and **/CE** \- Clock input and clock enable. When _/CE_ is low, a low-to-high transition of _CP_ will shift each register bit into the next higher bit. The value in _Q0_ is replaced by _Ds_ , and the value in _Q7_ is discarded. These two pins are interchangeable and internally are simply combined as a logical OR.
  * **Dn** \- Parallel input, replaces bit _Qn_ while _/PL_ is low. Same as _PI-n_ on 4021 but numbered 0-7 instead of 1-8.
  * **Q7** \- Register state output, the current state of bit 7. _Q0-Q6_ are internal and cannot be read directly.
  * **/Q7** \- Complementary/inverted _Q7_.
  * **Ds** \- Replaces _Q0_ when clocked.



## Datasheets

  * [Ti CD4021B](https://www.ti.com/lit/ds/symlink/cd4021b-q1.pdf)
  * [74HC165](http://www.datasheetcatalog.org/datasheet/philips/74HC_HCT165_CNV_2.pdf)



Categories: [Integrated circuits](Category_Integrated_circuits.xhtml)
